const data = [{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1603708777.40827786.jpg","title":"Redmi K30S 至尊纪念版 8GB+128GB","price":2599,"date":881,"salesVolume":1134677,"index":0},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/0099822e42b4428cb25c4cdebc6ca53d.jpg","title":"小米10","price":3799,"date":420,"salesVolume":1389471,"index":1},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1606288963.72951431.jpg","title":"Redmi Note 9 5G 6GB+128GB","price":1299,"date":1897,"salesVolume":1620062,"index":2},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1606288561.52572408.jpg","title":"Redmi Note 9 Pro 5G 6GB+128GB","price":1599,"date":1698,"salesVolume":1579585,"index":3},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1597145894.51396359.jpg","title":"小米10至尊纪念版 陶瓷黑","price":5299,"date":1751,"salesVolume":1670907,"index":4},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1597138340.1852584.jpg","title":"Redmi K30 至尊纪念版 薄荷绿","price":1999,"date":453,"salesVolume":964169,"index":5},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1606289221.80685857.jpg","title":"Redmi Note 9 4G 4GB+128GB","price":999,"date":988,"salesVolume":501572,"index":6},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1595400926.0448806.jpg","title":"Redmi 9A 湖光绿","price":599,"date":419,"salesVolume":206643,"index":7},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c1aafa589258a4d9fdf49831b457418d.jpg","title":"Redmi K30 Pro","price":2999,"date":1168,"salesVolume":1747703,"index":8},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/8729282b199b3ec51e31c1b6b15f3f93.jpg","title":"小米10 青春版 5G","price":1899,"date":76,"salesVolume":202593,"index":9},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/01ad3a03edbf295729a690b89d69147d.jpg","title":"Redmi 9","price":799,"date":1225,"salesVolume":858366,"index":10},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1569297737.97669352.jpg","title":"小米MIX Alpha","price":19999,"date":1534,"salesVolume":1556032,"index":11},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/53641901fbc28cbcdb495b17fdf69e46.jpg","title":"Redmi K30 5G","price":1599,"date":516,"salesVolume":325065,"index":12},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c388bd44a390e9c8413c25f0912839de.jpg","title":"Redmi 10X 4G","price":999,"date":916,"salesVolume":309025,"index":13},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/3c1af9783bdc53ed843af5655ca92009.jpg","title":"Redmi 7A","price":549,"date":468,"salesVolume":468744,"index":14},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/78d3ba2dd8a57f35951ea7b3466e1c41.jpg","title":"Redmi Note 8","price":899,"date":450,"salesVolume":17310,"index":15},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/39580d04e026445dde819d4454570ac2.jpg","title":"Redmi 10X 5G","price":1499,"date":533,"salesVolume":458227,"index":16},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7cfdbce40301133a287e9e57faa37bdf.jpg","title":"Redmi K30 Pro 变焦版","price":3199,"date":1158,"salesVolume":1254655,"index":17},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/3fc6d7f106e20029fafec4a739eb1df9.jpg","title":"Note 8 Pro","price":1299,"date":1093,"salesVolume":501407,"index":18},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c924c3f3436b6934495fd98f159ee3f7.jpg","title":"Redmi 8A","price":699,"date":186,"salesVolume":941117,"index":19},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c924c3f3436b6934495fd98f159ee3f7.jpg","title":"Redmi 8A","price":699,"date":590,"salesVolume":662905,"index":20},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1595486329.61241316.jpg","title":"腾讯黑鲨游戏手机3S 云天黑","price":3999,"date":906,"salesVolume":140989,"index":21},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1367efc0df6981934b4e8bf04c8d7dca.jpg","title":"Redmi 10X Pro 5G","price":2099,"date":400,"salesVolume":1775089,"index":22},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/d295c4fb500d163a7045dc715b47f808.jpg","title":"Redmi 8","price":799,"date":1555,"salesVolume":626491,"index":23},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/30095df9b9a4807aaec359f58a562780.jpg","title":"腾讯黑鲨游戏手机3","price":3499,"date":1760,"salesVolume":927513,"index":24},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1589879498.99952594.jpg","title":"Redmi 电视条形音箱 黑色","price":199,"date":1493,"salesVolume":1096312,"index":25},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1568617574.69725219.jpg","title":"小米小爱音箱 Pro","price":299,"date":744,"salesVolume":275708,"index":26},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1593339346.09992308.jpg","title":"小米小爱随身音箱 白色","price":49,"date":1233,"salesVolume":1454391,"index":27},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1560230039.28979252.jpg","title":"小米小爱音箱 Play","price":89,"date":1878,"salesVolume":1731726,"index":28},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1599013058.0141716.jpg","title":"小米电视音箱 影院版 黑色","price":699,"date":1383,"salesVolume":1425566,"index":29},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1522391647.00851451.jpg","title":"小米电视音响","price":399,"date":513,"salesVolume":819811,"index":30},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1578377349.02333205.jpg","title":"小米随身蓝牙音箱 灰","price":69,"date":961,"salesVolume":193954,"index":31},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1568616753.58243142.jpg","title":"小米小爱音箱 白色","price":219,"date":791,"salesVolume":1630560,"index":32},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-miapp-a1/17a13755-6212-7275-e573-cc1ea9fa2ae4.jpg","title":"小米方盒子蓝牙音箱 2 白色","price":79,"date":329,"salesVolume":1200920,"index":33},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1599017072.24951099.jpg","title":"Redmi小爱触屏音箱Pro 8英寸 白色","price":449,"date":1109,"salesVolume":606910,"index":34},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1590295912.74284920.jpg","title":"氧器重低音蓝牙音箱 黑色","price":999,"date":512,"salesVolume":709376,"index":35},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1581411694.79656473.jpg","title":"小米无线充蓝牙音箱 白色","price":149,"date":1863,"salesVolume":1270497,"index":36},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1550719656.70567332.jpg","title":"小米小爱触屏音箱 白色","price":174,"date":384,"salesVolume":1187903,"index":37},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1ab7943ae5215e0faacb04f7270d9cfb.jpg","title":"小米小爱音箱 Art 电池版 黑色","price":399,"date":1088,"salesVolume":102040,"index":38},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1575427252.04796744.jpg","title":"Redmi小爱音箱 Play 白色","price":79,"date":1541,"salesVolume":1457778,"index":39},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1545618934.94888069.jpg","title":"小米小爱音箱HD 深灰色","price":599,"date":1996,"salesVolume":1320198,"index":40},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1584930592.94895287.jpg","title":"Redmi小爱触屏音箱 8","price":309,"date":1604,"salesVolume":1095496,"index":41},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1569296497.06566845.jpg","title":"小米户外蓝牙音箱 深灰色","price":149,"date":632,"salesVolume":40533,"index":42},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1590029408.70095421.jpg","title":"小米小爱音箱 Art 白色","price":349,"date":198,"salesVolume":810907,"index":43},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/e277547c6e3329303dd2c20a327424c4.jpg","title":"小米AI音箱","price":174,"date":8,"salesVolume":1919073,"index":44},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1567593445.06061442.jpg","title":"小米小爱音箱 Play+米家台灯1S套装","price":278,"date":815,"salesVolume":1966586,"index":45},{"img":"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/8c52f60113b2e235544abca95d6687f4.jpg","title":"小米小爱触屏音箱Pro 8","price":599,"date":483,"salesVolume":614942,"index":46},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1567480714.19846959.jpg","title":"小爱音箱 Play+米家飞利浦彩光灯泡套装","price":168,"date":1532,"salesVolume":1246271,"index":47},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1553484236.82631752.jpg","title":"小米小爱音箱 万能遥控版","price":149,"date":1249,"salesVolume":1502586,"index":48},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/321610e787393c42e5cb2e5730a7681d.jpg","title":"小米小爱蓝牙音箱随身版 白色","price":49,"date":1747,"salesVolume":1756388,"index":49},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1597560005.21173046.jpg","title":"语音控制开关灯套装","price":228,"date":394,"salesVolume":1707427,"index":50},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/48cc2707808488f76ab6b0894d927702.jpg","title":"小米蓝牙语音遥控器 单机","price":99,"date":823,"salesVolume":1465978,"index":51},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/d52851e378cd33a948d5d946bb51307b.jpg","title":"悦米机械键盘Pro静音版 白色","price":599,"date":1076,"salesVolume":174122,"index":52},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1580542490.86471063.jpg","title":"小米无线蓝牙双模鼠标 静音版 白色","price":59,"date":1630,"salesVolume":1435847,"index":53},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1597560038.92873388.jpg","title":"语音自动清扫套装","price":1378,"date":1663,"salesVolume":1130193,"index":54},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1604387377.03376345.jpg","title":"愉悦之家 抗菌静音白鹅绒被 220*240cm","price":469,"date":20,"salesVolume":613759,"index":55},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1587443115.29594621.jpg","title":"8H乳胶弹簧静音床垫2 1.2m","price":1349,"date":1198,"salesVolume":842353,"index":56},{"img":"https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1567480765.82915089.jpg","title":"小爱音箱+米家飞利浦智睿吸顶灯套装","price":598,"date":247,"salesVolume":37757,"index":57}]

let paginationData = [];
let tempData = data;
let flagList = {
  price: true,
  date: true,
  salesVolume: true,
  currentPageNum: 0,
};

function objSort(prop) {
  return function (obj1, obj2) {
    var val1 = obj1[prop];
    var val2 = obj2[prop];
    if (!isNaN(Number(val1)) && !isNaN(Number(val2))) {
      val1 = Number(val1);
      val2 = Number(val2);
    }
    if (val1 < val2) {
      return -1;
    } else if (val1 > val2) {
      return 1;
    } else {
      return 0;
    }
  };
}

function showList(data) {
  $("#sc-goods-ctnr").html("");
  data.forEach((item) => {
    const template = `
    <a onclick="gotoDetail(${item.index})">
              <div class="goods-item" >
              <div class="figure-img">
              <img
                  src="${item.img}"
                  width="200"
                  height="200"
              />
              </div>
              <h2 data-v-0812a246="" class="title">
              <a>${item.title}</a>
              </h2>
              <p class="price">
              <span data-v-0812a246="">${item.price}元</span>
              </p>
              <div class="thumbs">
              <ul class="thumb-list">
                  <li data-v-0812a246="" class="">
                  <img
                      src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1603708777.40827786.jpg"
                      width="34"
                      height="34"
                  />
                  </li>
                  <li data-v-0812a246="" class="">
                  <img
                      src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1603708852.79397532.jpg"
                      width="34"
                      height="34"
                  />
                  </li>
              </ul>
              </div>
              <div data-v-0812a246="" class="flags">
              <span data-v-0812a246="" class="salel-label"
                  ><img
                  src="http://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/05c84c8d8ffebf7fd17c8838b5d81ee6.png"
                  width="42"
                  height="18"
                  class="sale-icon" /><img
                  src="https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c02cd0743d6ded615afe101af6a8a918.png"
                  width="55.5"
                  height="18"
                  class="sale-icon"
              /></span>
              </div>
              </div>
              </a>
              `;
    $("#sc-goods-ctnr").append(template);
  });
}

function sortList(sortStr) {
  if (flagList[sortStr]) {
    tempData = data.sort(objSort(sortStr));
    for (var key in flagList) {
      if (key === sortStr) {
        flagList[key] = false;
      } else {
        flagList[key] = true;
      }
    }
  }
  $("#sc-goods-ctnr").html("");
  tempData.reverse();
  distrbutePaginationData();
  flagList["currentPageNum"] = 0;
  showList(paginationData[0]);
  showPagenation();
}

//详情页
function gotoDetail(index) {
  // 9-4. 进行页面跳转
  window.location.href = `./xiangqingye.html?img=${data[index].img}&price=${data[index].price}&title=${data[index].title}`;
}

$(".box2 .centerNav li p a span").on("mouseenter", function () {
  //$('a1').slideDown('slow')
  $(".a1").css("display", "block");
});
$(".box2").on("mouseleave", function () {
  $(".a1").css("display", "none");
  // $('.a1').slideUp('slow')
});

function initData() {
  distrbutePaginationData();
  fenye(flagList["currentPageNum"]);
}

function distrbutePaginationData() {
  paginationData = [];
  for (let i = 0; i < tempData.length; i++) {
    tempList = paginationData[parseInt(i / 12)];
    tempList ? tempList.push(data[i]) : paginationData.push([data[i]]);
  }
}

function fenye(pageNum) {
  showList(paginationData[pageNum]);
  flagList["currentPageNum"] = pageNum;
  showPagenation();
}

function showPagenation() {
  let pageLi = "";
  if (flagList["currentPageNum"] != 0) {
    pageLi += `<li>
        <a  aria-label="Previous" onclick="fenye(${
          flagList["currentPageNum"] - 1
        })">
          <span aria-hidden="true">&laquo;</span>
        </a>
        </li>`;
  } else {
    pageLi += `<li class="disabled">
      <a href="#" aria-label="Previous">
        <span aria-hidden="false">&laquo;</span>
      </a>
      </li>`;
  }

  paginationData.forEach((item, index) => {
    if (flagList["currentPageNum"] == index) {
      pageLi += `<li class="active" ><a href="#" onclick="fenye(${index})">${index}</a></li>`;
    } else {
      pageLi += `<li><a href="#" onclick="fenye(${index})">${index}</a></li>`;
    }
  });

  if (flagList["currentPageNum"] < paginationData.length - 1) {
    pageLi += `<li>
  <a  aria-label="Next" onclick="fenye(${flagList["currentPageNum"] + 1})">
    <span aria-hidden="true">&raquo;</span>
  </a>
  </li>`;
  } else {
    pageLi += `<li class="disabled">
  <a aria-label="Next" >
    <span aria-hidden="false">&raquo;</span>
  </a>
  </li>`;
  }
  $(".pagination").html(pageLi);
}
function filter(start, end) {
  tempData = [];
  data.forEach((item) => {
    if (start <= item.index && item.index <= end) {
      tempData.push(item);
    }
  });
  $("#sc-goods-ctnr").html("");
  tempData.reverse();
  distrbutePaginationData();
  flagList["currentPageNum"] = 0;
  showList(paginationData[0]);
  showPagenation();
}
initData();

// let newData = []
// data.forEach((item,index)=>{
//   item.index = index
//   newData.push(item)
// })
// console.log(JSON.stringify(newData));